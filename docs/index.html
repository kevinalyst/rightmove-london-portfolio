<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>London Property Portfolio · Demo Chat</title>
    <link rel="icon" href="assets/favicon.svg" />
    <link rel="stylesheet" href="styles.css" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3598633663672013"
     crossorigin="anonymous"></script>
  </head>
  <body>
    <header class="topbar">
      <div class="brand">
        <img src="assets/logo.svg" alt="Logo" class="logo" />
        <h1>London Property Portfolio</h1>
      </div>
      <nav>
        <a class="btn-ghost" href="https://youtu.be/Rr11Ent0O-M" target="_blank" rel="noopener noreferrer" aria-label="Watch demo on YouTube">
          <svg class="yt" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M23.5 6.2c-.3-1.2-1.2-2.1-2.4-2.4C19 3.3 12 3.3 12 3.3s-7 0-9.1.5C1.7 4.1.8 5 .5 6.2.1 8.3.1 12 .1 12s0 3.7.4 5.8c.3 1.2 1.2 2.1 2.4 2.4 2.1.5 9.1.5 9.1.5s7 0 9.1-.5c1.2-.3 2.1-1.2 2.4-2.4.4-2.1.4-5.8.4-5.8s0-3.7-.4-5.8zM9.7 15.6V8.4L15.9 12l-6.2 3.6z"/></svg>
          <span>Watch Demo</span>
        </a>
      </nav>
    </header>

    <main class="center">
      <section class="card" aria-label="London Property Analysis">
        <div class="card-head">
          <div class="glyph" aria-hidden="true">
            <img src="assets/favicon.svg" alt="" role="presentation" />
          </div>
          <h1>London Property Analysis</h1>
          <p class="byline">by <a href="https://github.com/Kevin-lee-187/rightmove-london-portfolio" target="_blank" rel="noopener noreferrer">Kevin Li</a></p>
          <div class="kicker">Explore the data with Snowflake Cortex</div>
          <p class="lede">Ask questions about transformed Rightmove listings using two modes: Analyst for structured SQL-style analysis over 28k+ estates on Rightmove, and Search for unstructured mining across listing descriptions and docs.</p>
          <div class="pills-row" id="pills-row">
            <button class="pill" data-mode="analyst" data-viz="table" data-prompt="Use Cortex Analyst. Produce a dataset for a table: columns RIGHTMOVE_ID, URL, AREA, PROPERTY_TYPE, BEDROOMS, SIZE_SQM, PRICE_VALUE, PRICE_PER_SQM. Exclude rows with null area, exclude land in property_type; winsorize outliers at the 1st/99th percentile for price_per_sqm. Then return a ranking of the top 20 best space value (lowest price_per_sqm) with bedrooms shown. Round prices with £ formatting and £/sqm to 0 decimals.">Best space value properties</button>
            <button class="pill" data-mode="analyst" data-viz="bar" data-prompt="Use Cortex Analyst, compute the median price_per_sqm by area and property_type. Return a tidy table with columns: area, property_type, listings_count, median_ppsqm. Exclude groups with listings_count < 50 and rows missing area. Also append a second table: the top 10 lowest median_ppsqm combinations (best value). Round £/sqm to 0 decimals. Creates: grouped bar charts">Median £/sqm by area & type</button>
            <button class="pill" data-mode="search" data-viz="table" data-prompt="Use Cortex Search, search descriptions/features/history for phrases like up-and-coming, emerging hotspot, regeneration, investment potential, Crossrail/Elizabeth line, new transport links, planned development, rental yield. Return up to 20 candidate rightmove_id, then filter out land in property type and rank by lowest price_per_sqm. Output the top 20 with columns: RIGHTMOVE_ID, URL, AREA, property_type, bedrooms, price_value, price_per_sqm, matched_snippet (a short snippet highlighting the signal).">Investment opportunity properties</button>
            <button class="pill" data-mode="search" data-viz="table" data-prompt="Use Cortex Search, Find listings mentioning transformation/renovation potential using phrases like modernisation required, refurbishment, fixer-upper, extension/loft potential, STPP, redevelopment, project, auction, cash buyers. Also flag risk cues like short lease, non-standard construction, EWS1, ex-local authority, structural issues. Return up to 20 candidates rightmove_id, filter out land in property type, and output the top 10 by lowest price_per_sqm with columns: RIGHTMOVE_ID, URL, property_type, bedrooms, size_sqm, price_value, price_per_sqm, opportunity_terms, risk_terms, matched_snippet. List any matched opportunity/risk terms in those two columns.">Renovation projects & risks</button>
          </div>
        </div>

        <div class="chat-panel">
          <div class="messages" id="messages" aria-live="polite"></div>
          <div class="composer">
            <textarea id="input" rows="3" placeholder="Ask anything about prices, types, or trends… (Enter to send, Shift+Enter for newline)"></textarea>
            <div class="actions">
              <button id="reset" class="secondary">Reset</button>
              <button id="ask">Ask</button>
              <span class="uses" id="uses-badge" title=""><span id="uses-count">5</span>/5</span>
            </div>
          </div>
        </div>
        <div class="sr-only" id="a11y-announcer" aria-live="polite"></div>
      </section>
    </main>

    <footer class="footer">
      <nav>
        <a href="privacy.html">Privacy</a>
        <a href="terms.html">Terms</a>
      </nav>
      <small>© 2025 Kevin Li</small>
    </footer>

    <script>
      // Updated to use Worker URL directly due to Pages routing issue
      window.__BACKEND_BASE_URL = 'https://london-portfolio-backend.axiuluo40.workers.dev';
    </script>
    <!-- Vega-Lite for native Snowflake Cortex chart rendering -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <script src="app.js"></script>
  </body>
  </html>


